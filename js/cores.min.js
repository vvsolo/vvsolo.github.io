var common={space:"\\x00-\\x09\\x0b\\x0c\\x0e-\\x20\\xa0\\x7f\\u1680\\u180e\\u2000-\\u200f\\u2028-\\u202f\\u205f-\\u2064\\u3000\\ue004\\ue07b\\ue11a\\ue1d5\\ue4c6\\uf604\\uf04a\\uf8f5\\ufe0f\\ufeff",han:"⺀-⻿⼀-⿟぀-ゟ゠-ヺー-ヿ㄀-ㄯ㇀-㇣㈀-㋿㐀-䶿一-鿿豈-﫿",latin:"À-ÖØ-öø-ÿĀ-ſƀ-ɏḀ-ỿⱠ-ⱿꜢ-ꜧꜫ-ꟿꬰ-ꭩ",hwPun:"!-/:-@[-`{-~¡-¿",fwPun:"·–—―…※、。〈〉《》【】〔〕〖〗〝〞・！-／：-＠～￠-￥",qfwPun:"‘’“”「」『』",ofwPun:"°％‰‱℃℉%",enSep:"'`＇‘’『』",mw:"哟啊哈哦呵呀啦吧嗯哼咦呜喂啪喔嘿呃哎唷唔咛呦唰啧吡喏呸咳呼嗖咯吱咕啐碰哗啵嗞嘞噶咂呓嗬吇嗵扑哧噗呲嗤呛嘶嗝呱嘟咿叽笃喳嘎嘀哩嘤唧咪喵哞嗷呯砰哄嚯叮咚哐咝噼嘭咣咔咹嚓嗡恩耶咻吖轰隆汪驾呔啜雪哺嗫铮汩滴答诶蛤嗐刷嗒咵蹬铿溜滋歘霹喲嗚嚀嘖譁囈撲嗆嘰篤嚶噝轟駕囁錚誒鏗",sf:"☠"},config=(String.prototype.commFmt=function(){return this.replace(/\{\$\w+\}/g,function(e){return common[e.slice(2,-1)]||e})},String.prototype.commReg=function(e){return new RegExp(this.commFmt(),""===e?"":e||"g")},{Separator:"＊＊＊　　＊＊＊　　＊＊＊",tSeparator:"＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊",Divide:"：",Linenum:35,maxLinenum:200,endStrs:/^[（【“「<]?(?:未完待[续續]|未完|待[续續]|完[结結]|全[文书書][完终終]|[完终終])[）】”」>]?$/gm,novelTitle:/^[ 　]*(《([^》\n]+)》(.*[^。？！…\n]|$)|[书書]名[：\:](.+))$/m,novelAuthor:/^[ 　]*((?:作者|[续續改][写寫]|排[版编]|[精一二点點]校|作家|整理|改编|[编編译譯著]者|[编辑編輯][录錄]|著作?|翻[译譯]|勘[误誤校]|校[正证注订訂对對笺箋]|[笺箋][正证校注订訂])[：\:].*)$/gm,enSep:"\\b[a-zA-Z]+\\b[{$enSep}](?: |\\b[a-zA-Z]+\\b)?".commReg("g"),rCoord:"\\b(?:\\d{1,3}(?:[.。]\\d{1,2})?[{$qfwPun}\\x22\\x27°]){2}".commReg("g")}),libs=(config.nSeparator="^(?:"+config.Separator.replace(/[ 　]+/g,"[ 　]*")+")$",String.prototype.val=function(e){var t=this;return void 0!==e?common[t]=e:common[t]||config[t]||""},Object.assign(String.prototype,{space:function(){return this.toUNIX().replace("[{$space}]+".commReg("g")," ")},toUNIX:function(){return this.replace(/\r/g,"")},trims:function(){return this.space().replace(/^ +/gm,"").replace(/ +$/g,"")},getReg:function(e){return RegExp(this.replace(/\x5c\x5c+/g,"\\\\"),""==e?"":e||"gm")},regEscape:function(){return this.replace(/[#.*+?^=!:${}()|[\]\/\\-]/g,"\\$&")},getSafeReg:function(e){return this.regEscape().replace(/\b/g,"\\b").getReg(e)},cleanSpace:function(e,t){return t=t||/\s/g,e?this.replace(e,function(e){return e.replace(t,"")}):this.replace(t,"")},findCount:function(e){return(this.match(e)||"").length},len:function(){return this.length+this.findCount(/[^\x00-\xFF]/g)},fmt:function(t,n){var r,e=""+this,a=typeof t;return"string"==a||"number"==a?e.replace(/\{\$(?:zz|0)\}/g,t):"object"!=a?e:e.replace(/\{\$[\w\-\.]+\}/g,function(e){return r=t,e.slice(2,-1).split(".").every(function(e){return(r=r[e])||!1}),void 0===r?e:Array.isArray(r)?r.join(n||""):r})},fmtReg:function(e,t,n){return this.fmt(e,n).getReg(t)},someTest:function(e){return e.some(function(e){return-1<this.search(e)},this)},mapLine:function(n){var r;return this.split("\n").map(function(e,t){return e.length<1||null===(r=n(e,t))||!1===r?e:r}).join("\n")+"\n"}}),Object.assign(String.prototype,{replaceArrs:function(e){return e.reduce(function(e,t){return"string"==typeof(t=[].concat(t,""))[0]&&(t[0]=t[0].getReg("g")),e.replace(t[0],t[1])},this)},replaces:function(e){var t,n=""+this;if(Array.isArray(e))n=n.replaceArrs(e);else for(t in e)n=n.replaceArrs(e[t]);return n},replaceAtArr:function(t,e,n){var r=t[1].split(e),a="function"==typeof n;return this.replace(RegExp("["+t[0]+"]","g"),function(e){return e=r[t[0].indexOf(e)]||e,a?n(e):e})},replaceAt:function(e){return this.replaceAtArr(e,"")},replaceHooks:function(e){return e.reduce(function(e,n){return"hit"in n?[].concat(n.hit).reduce(function(e,t){return e.replace(t,function(e){return-1<e.search(/^[\d]+$/)||"skip"in n&&-1<e.search(n.skip)||"need"in n&&e.search(n.need)<0?e:e.replaceHook(n)})},e):e.replaceHook(n)},this)},replaceHook:function(e){var t,n=this;for(t in e)["hit","skip","need"].includes(t)||("at"===t.slice(0,2)?n=n.replaceAt(e[t]):"rp"===t?n=n.replace(e.rp[0],e.rp[1]):"rps"===t?n=n.replaces(e.rps):"lc"===t?n=n.toLetterCase(e.lc):"m"===t.charAt(0)&&(n=n.matchLetterCase(e[t],t.slice(1,2))));return n},matchLetterCase:function(e,t){return this.replace(e,function(e){return e.toLetterCase(t)})},toLetterCase:function(e){function t(e){return e.matchLetterCase(/\b[a-z]/g,"u").matchLetterCase("(?:^|[{$han}]| )[{$latin}]".commReg("gm"),"u").matchLetterCase(/\'\b[A-Z]+\b/g,"l").matchLetterCase("[{$latin}][a-zA-Z\\']+".commReg("g"),"e")}switch(e){case"c":return this.replace(/\s*/g,"");case"u":return this.toUpperCase();case"l":return this.toLowerCase();case"d":return this.matchLetterCase(/\b[a-zA-Z]+\b/g,"l");case"f":return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase();case"e":return this.charAt(0)+this.slice(1).toLowerCase();case"s":return t(this);case"z":return t(this.toLowerCase())}return this}}),String.prototype.maskSafe=function(e,n){return n=n||common.sf,[].concat(e).reduce(function(e,t){return e.replace(t,function(e){return"\n"+e.trim().replace(/^|$/gm,n)+"\n"})},this)},Object.assign(String.prototype,((r,a)=>{function e(t){var n="function"==typeof t;return function(e){return this.replace(e,function(e){return(e=n?t(e):e)in r||(r[e]=["〔☯"+ ++a+"〕",e]),r[e][0]})}}return{maskSep:e(function(e){return e.replaceAt(["。“”『』‘’「」",".\"\"\"\"''''"])}),maskQuote:e(function(e){return e.replace(/[“”「」"]/g,"〔☯双引〕").replace(/[‘’『』']/g,"〔☯单引〕")}),maskLetter:e(function(e){return e.replace(/[＆]/g,"&").replace(/[；]/g,";")}),maskRestore:function(){var e,t=this;for(e in r)t=t.replace(r[e][0].getReg("g"),r[e][1]);return t.replace(/〔☯双引〕/g,'"').replace(/〔☯单引〕/g,"'")}}})({},-1)),((n,t)=>{for(var e in n){var r=n[e];n[e]={id:e,name:r[0],path:r[1],key:r[2].split(","),once:!!r[3]}}return{once:function(e){return!!e.once&&(t[e.id]||!(t[e.id]=!0))},index:function(e){if(e in n)return e;for(var t in n)if(n[t].key.includes(e))return t;return null},get:function(e){return n[this.index(e)]||null},gets:function(){return n}}})({Init:["初 始 化","core","init"],Finish:["结束","core","finish,fin"],End:["结束处理","core","end"],NumberLetter:["数字字母","numberletter","numberletter,nl",!0],Number:["半角数字","numberletter","number,num",!0],Letter:["半角字母","numberletter","letter,let",!0],FullNumberLetter:["全角数字字母","numberletter","fullnl"],Chapter:["章节标题","chapter","chapter,chap,ct"],Char:["字符处理","char","char,cha"],English:["英文格式","english","english,en"],Quote:["引用符号","quote","quote,qu"],CNQuote:["中式引用","quote","cnq"],ESQuote:["法式引用","quote","esq"],Space:["字间空格","space-node","space,sp",!0],Separator:["分隔符号","separator-node","separator,se"],Punctuation:["标点符号","punctuation-node","punctuation,pun"],Unicode:["统 一 码","unicode-node","unicode,uni,uc"],HtmlEntity:["字符实体","htmlentity","htmlentity,he"],Variant:["变体字母","variant","variant,var"],SerialNumber:["变体序号","serialnumber","serialnumber,sn"],Ads:["广告","ads","ads"]},{})),_english=(Object.assign(String.prototype,{conv:function(e){"string"==typeof e&&~e.indexOf(",")&&(e=e.split(","));var n=[].slice.call(arguments,1);return[].concat(e).reduce(function(e,t){return e=null!==(t=libs.get(t))&&"function"==typeof(t=e["$"+t.id])?t.apply(e,n):e},this)},safetyBefore:function(){return this.maskSep(config.enSep).maskSep(config.rCoord).maskQuote(/[“"]([0-9a-zA-Z]+)[”"]/g).maskQuote(/[‘']([0-9a-zA-Z]+)[’']/g)},safetyAfter:function(){return this.maskRestore().replace(/[“"]([^”"，。\n]*[0-9a-zA-Z])[”"]/g,"“$1”").replace(/[‘']([^’'，。、（）“”"\n]*[0-9a-zA-Z])[’']/g,"‘$1’").replace(/\b[A-Za-z]+\b[\'‘’]\b[A-Za-z]{1,2}\b /g,function(e){return e.toLetterCase("f").replace(/[\'‘’]/,"'")}).matchLetterCase(/ [A-Z][a-z]+'[a-z]+ /g,"l")},findCenter:function(e,t,n){return this.replace(e,function(e){return e.stringAlign(t||"",n||"","center")})},stringAlign:function(e,t,n){var r=(""+this).trim(),a=r.len(),i=2*config.Linenum-a;return"left"!==n&&0<a&&0<i&&("center"===n?r="　".repeat(~~(i/4))+(0<a%4?"":" ")+r:"right"===n&&(r="　".repeat(~~(i/2))+(0<a%2?" ":"")+r)),(e||"")+r+(t||"")}}),((e,t)=>{String.prototype.$Number=function(){return this.replaceAt(e)},String.prototype.$Letter=function(){return this.replaceAt(t)},String.prototype.$NumberLetter=function(){return this.replaceAt([e[0]+t[0],e[1]+t[1]])}})(["０１２３４５６７８９","0123456789"],["ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"]),String.prototype.$Space=function(){var e="[{$han}{$fwPun}{$qfwPun}{$ofwPun}&\\x2f\\x5c]".commFmt();return this.replace(new RegExp(` +${e}|${e} +`,"g"),e=>e.trim())},String.prototype.$Init=function(){return(this+"\n").trims().replace(/\n\n+/g,"\n")},String.prototype.$Finish=function(){return this.safetyAfter().replace(/  +/g," ").replace(/\n\n\n+/g,"\n\n").replace(/^\n+/,"").replace(/\n\n+$/,"\n")},(e=>{String.prototype.$End=function(){return this.conv("Char").replaces(e).$Finish()}})([[/—{1,2}>/g," --\x3e "],[/={1,2}>/g," => "],[/Co。，? ?Ltd。?/gi,"Co.,Ltd."]]),(e=>{String.prototype.$Punctuation=function(){return this.replaceHook(e)}})({at:["-︐︑︒︓︔︕︖‛｀‐━―─ーˉ﹣~〜∽∼⁓﹗!﹫＠﹟＃﹩＄﹪％﹠＆﹡ꁘ(﹙﹚)﹐,｡.．∶﹕︰:﹔;､丶﹑﹖?⋯┅¨▪•‧・﹒ꔷ︳﹛﹜{}〝〞｢″〃｣‴⌈⌋﹤﹥︿﹀＾﹦＝﹢＋／﹨＼｜︱¦‖＂‟′＇","—，、。：；！？``——————－～～～～～！！@@##$$%%&&＊＊（（）），，。。。：：：：；；、、、？？………······〉｛｝｛｝“”“””””「」＜＞∧∨^==++/\\\\||||\"\"''"],rps:[[/([·、`°—－～：；（）［］｛｝%∧∨〈〉])\1+/g,function(e,t){return~"—－～".indexOf(t)?t+t:~"·、`°".indexOf(t)?"……":t}],[/…[，；：、。·`～—？！]+|[，；。·`～—？！]+(?=…)|。。+|，，+/g,"…"],[/…+/g,"……"],[/……(?=等[，。！？、])/g,""],[/^(?:…+\n){2,}/gm,"……\n"],[/“：|：“”/g,"：“"],[/。）。/g,"）。"],[/([…。，！？])”[，；：、。·`～—？！]/g,"$1”"],[/([，；：、。·`])[，；：、。·`～—？！]+/g,"$1"],[/([？！])[，；：、。·`～—]+/g,"$1"],[/～[，；：、。·`—？！]+/g,"～"],[/[？！]{2,}/g,function(e){var t="？"===e.charAt(0),e=e.slice(1);return t?~e.indexOf("！")?"？！":"？？？":~e.indexOf("？")?"！？":"！！！"}]]}),(e=>{String.prototype.$Separator=function(){return this.replaces(e)}})([[/[ 　]+(?=[#§·●◎◇◆□■△▲※〓＝﹡＋＠☆★—－─=~～＊×\*\-\+@])/g,""],[/^＊＊{34,}$/gm,"〔★※★〕"],[/[#§·●◎◇◆□■△▲※〓＝﹡＋＠]{3,}/g,"@@@@"],[/[`&★☆—－─=~～＊×\-\+]{4,}/g,"@@@@"],[/^[#§·●◎◇◆□■△▲※〓＝﹡＋☆★—－─=~～＊×\*\-\+]{2,}$/gm,"@@@@"],[/([。！？…—”」’』])[*xX]{4,}/g,"$1\n@@@@\n"],[/^[＊×\*]{3,}/gm,"@@@@"],[/\*\*{3,}$/g,"@@@@"],[/[\-—＠@][\-—＠分切割线]{3,}[\-—＠@]/g,"@@@@"],[/\b([a-zA-Z]+)\b[\-—]@@@+/g,"$1-XXXXX"],[/@@@+……$/g,"@@@@"],[/([：，；])\n?@@@@\n?/g,"$1****"],[/\b(\d+)\b\n?@@@@\n?\b(\d)/g,"$1****$2"],[/@@@@\n?(?=[，。！？…’”』」])/g,"****"],[/(?:@@+\n*)+/g,"\n@@@@\n"],[/\n+@@@@\n+/g,"\n"+"Separator".val()+"\n"],[/〔★※★〕/g,"tSeparator".val()]]),(e=>{String.prototype.$Quote=function(){return this.safetyBefore().replaces(e.rps).safetyAfter()},String.prototype.$ESQuote=function(){return this.replaceAt(e.at)},String.prototype.$CNQuote=function(){return this.replaceAt(e.at.reverse())}})({at:["『』「」","‘’“”"],rps:[[/[`＇‹›‘’『』]/g,"'"],[/'([^\'\n]+)'/g,"‘$1’"],[/'/g,"‘"],[/^([ 　]*)’/gm,"$1‘"],[/：'/g,"：‘"],[/‘(。|……|[！？—～]{1,3}|$)$/gm,"’$1"],[/[«»‟„〝〞〟［］＂″｢｣“”「」⌈⌋]/g,'"'],[/"([^\"\n]+)"/g,"“$1”"],[/"/g,"“"],[/^([ 　]*)”/gm,"$1“"],[/：”/g,"：“"],[/“(。|……|[！？—～]{1,3}|$)$/gm,"”$1"]]}),(e=>{String.prototype.$Char=function(){return this.replaceHooks(e)}})([{hit:"\\b[a-zA-Z]*[0-9。\\.]+\\w*[{$ofwPun}]?(?:[。·.：〉〈＊，—＋－＝＞＜～><]{1,2}\\b[0-9。\\.]+\\w*[{$ofwPun}]?)+".commReg("g"),at:["。·.：〉〈＊—＋－＝＞＜～","...:><×-+-=><~"],rps:[[/\.($|”)/g,"。$1"],[/([a-zA-Z])\.(?=\d)/g,"$1。"]]},{hit:[/\b[0-9a-zA-Z]+(?:[~～－—\-]{1,4}[0-9a-zA-Z]+){1,2}\b/g,/[—]{1,4}\b\d+\b/g],rps:[[/[－—\-]+/g,"-"],[/[~～]+/g,"~"]]},{hit:[/\b\d+(?:\.\d+)?\b(\W{0,3})[~～－–—\-]{1,4}\b\d+(?:\.\d+)?\b\1/g,/\+—/g],at:["－–—~","---～"],rps:[[/\-+/,"-"],[/～～+/,"～"]]},{hit:[/\b(?:\d{1,3}(?:[,，]\d{1,3}){1,3}[。\.]\d{1,8}|\d{1,3}(?:[,，]\d{1,3}){1,3}|\d{1,18}[。\.]\d{1,8}|(?:[1-9]|[1-9]\d|1\d{2}|25[0-5]|2[0-4]\d)(?:[。\.](?:\d|[1-9]\d|1\d{2}|25[0-5]|2[0-4]\d)){3})\b/g,/\b(?:[A-Z][\.．。]){2,4}/g,/^\d{1,2}。/gm],skip:/\b(?:\d+，\d{1,2}|\d+(?:，\d+){2,}|[1-9]\d+。\d{3})\b/,at:["，。．",",.."]},{hit:/\b(?:[A-Z]\.){2,4}(?=[’”』」]|\n)/g,rp:[/\.$/,"。"]},{hit:/\b(?:No|Top|Lv|Level)\b。\b\d{1,5}\b/g,lc:"u",rp:[/。/,"."]},{hit:/[,.]\n/g,at:[",.","，。"]}]),String.prototype.$Unicode=function(){return this.conv("NumberLetter").replace(/[＆&][﹟＃#]\b(?:[xX][\da-fA-F]{4}|\d+)\b[；;]?/g,function(e){var t=e.replace(/[＆&﹟＃#xX；;]/g,"");return~e.search(/[＆&]#[xX]/)&&(t="0x"+t),String.fromCharCode(t)}).replace(/\\\b(?:[xX][\da-fA-F]{2}|[uU]?[\da-fA-F]{4})\b/g,function(e){return String.fromCharCode("0x"+e.replace(/[\\xXuU；;]/g,""))}).replace(/(?:[％%]\b[\da-fA-F]{2})+\b/g,function(t){try{return decodeURIComponent(t)}catch(e){return t}})},(e=>{String.prototype.$Variant=function(){return this.replaceAt(e)}})(["ÀÁÂÃÄÅĀАǍⱭàáâãäåāǎɑаßЬЪьъÇçÐÈÉÊËĒĚèéêëēěΗんÌÍÎÏĪǏΙìíîïīǐιМḿмΝÑŃŇИñńňиηÒÓÔÕÖŌǑØОòóôõöōðǒøоÞΡþρΤτÙÚÛÜŪǓǕǗǙǛυùúûüūǔǖǘǚǜⅤⅴνЩщωΥÝŸγýÿ","AAAAAAAAAaaaaaaaaaaaBbbbbCcDEEEEEEeeeeeeHhIIIIIIIiiiiiiiMmmmNNNNNnnnnnOOOOOOOOOooooooooooPPppTtUUUUUUUUUUuuuuuuuuuuuVvvWwwYYYyyy"]),(e=>{String.prototype.$SerialNumber=function(){return this.replaceAtArr(e,"|",function(e){return"（"+e+"）"})}})(["⓪⓿⒈①➀⓵➊❶⑴⒉②⓶➁➋❷⑵⒊③⓷➂➌❸⑶⒋④⓸➃➍❹⑷⒌⑤⓹➄➎❺⑸⒍⓺⑥➅➏❻⑹⒎⓻⑦➆➐❼⑺⒏⓼⑧➇➑❽⑻⒐⑨➈⓽➒❾⑼⒑⑩➉⓾➓❿⑽⒒⑪⑾⒓⑫⑿⒔⑬⒀⒕⑭⒁⒖⑮⒂⒗⑯⒃⒘⑰⒄⒙⑱⒅⒚⑲⒆⒛⑳⒇㊀㊁㊂㊃㊄㊅㊆㊇㊈㊉㈠㈡㈢㈣㈤㈥㈦㈧㈨㈩","00|00|01|01|01|01|01|01|01|02|02|02|02|02|02|02|03|03|03|03|03|03|03|04|04|04|04|04|04|04|05|05|05|05|05|05|05|06|06|06|06|06|06|06|07|07|07|07|07|07|07|08|08|08|08|08|08|08|09|09|09|09|09|09|09|10|10|10|10|10|10|10|11|11|11|12|12|12|13|13|13|14|14|14|15|15|15|16|16|16|17|17|17|18|18|18|19|19|19|20|20|20|一|二|三|四|五|六|七|八|九|十|一|二|三|四|五|六|七|八|九|十"]),String.prototype.$HtmlEntity=function(){var e=document.createElement("div");return e.innerHTML=this.replace(/[&＆]\b([a-zA-Z][a-zA-Z1-8]{1,30})\b[;；]/g,"&$1;"),e.innerHTML.replace(/[&＆][Aa]mp[;；]/g,"&")},common._ac="0-9a-zA-Z{$hwPun}{$fwPun}{$latin}".commFmt(),common._ei="[a-zA-Z{$latin}\\']+(?:[ ][a-zA-Z{$latin}\\']+){0,4}".commFmt(),{Upper:"S+VIP|V+IP|WQLMLGB|NASDAQ|[SPNMCE]ICU|E[MD]BA|PTS[DT]|AIDS|APEC|CCTV|CDMA|CUBA|EAPM|ESPN|HDMI|HTML|IMAX|IMDB|IPTV|NASA|OLED|SARS|SEGA|SOHO|SWAT|WCBA|YYDS|OOXX|XXOO|A[TP]M|B2[BCMA]|C[AI]A|C[BC]D|C[CEFTOI]O|C2[ABC]|CN[NM]|[EO]TC|FDA|PV[CPE]|I[BC]M|IS[OP]|L[ES]D|MM[PB]|WT[FO]|[ABC]BS|[ABN]BC|[ICR]CU|[CG]PU|[SH]UV|[VD]CD|[DR]NA|[NC]BA|[MK]TV|[SG]PA|UV[ABCD]|AED|AMC|BGM|CSS|DIY|EDA|EMS|FBI|GDP|GPS|GSM|IMF|IPO|KGB|LOL|LSP|MBA|MPV|MRI|NDE|NHK|NND|NPC|NTR|O2O|OEM|OMG|ORV|PDA|PPT|RPG|QRS|SOS|TMD|TNT|TVB|UFO|USA|VCR|VPN|WPS|YQF|C[TDR]|D[PCJ]|O[SAL]|P[CS]|I[DPC]|[SJ]B|[STP]M|[VAMCX]R|[ADTM]V|[UV]I|[OJUP]K|[EIQY]Q|NG|VS|I",Special:"iPhone|iPhoneSE|iPhoneX|iPhoneXR|iPhoneXRMax|iPhoneXR|iPad|iPadPro|iPadAir|iMac|iTv|iPod|iOS|ThinkPad|Windows|Apple|Linux|Unix|FreeBSD|JavaScript|JScript|VBScript|TikTok|toC|toB|PlayStation|ing",SpecialComb:"McCai|McCall|McClure|McCormick|McCoy|McCullough|McDaniel|McDonald|McDowell|McGee|McGuire|McIntyre|McKayla|McKee|McKenna|McKenzie|McKile|McKinley|McKinney|McLovin|MacDonald|Zhuang ?Bility|Niu ?Bility|Sha ?Bility|Game ?Over",Unit:"MHz|GHz|KHz|kWh|kW|mWh|gWh|mA|μA|mV|μV|mΩ|μΩ|Mbps|mmHg|MT/s|Kbit|Kbyte|bit|byte",UnitTest:/kW|mA|mV/i,Overlap:/\b(buling|duang|bling|ding|ring|fuck|goal|what|why|who|biu|bye|yes|hia|mua|dei|gei|ha|up|go|no|hi|ok)\1+\b/gi,FixFirst:[{hit:[/\b[a-zA-Z]{2,}(?:·\b[a-zA-Z]{2,}\b){1,4}/g,/\b[a-zA-Z]{2,}(?:[－—\-]\b[a-zA-Z]{2,}\b){3,}/g],rp:[/[·－—\-]/g," "]},{hit:/\b[a-zA-Z]+\d+\b[年月日号楼幢区路]/g,rp:[/\d+/," $&"]},{mf:"\\b[a-zA-Z{$latin}\\-\\']+(?:[ ，][a-zA-Z{$latin}\\-\\']+)*".commReg("g")},{hit:/\b[\w\-\\\/]{2,}\b/g,need:/\d/,lc:"u"}],FixLast:[{hit:".{$_ei}".commReg("g"),need:"[{$han}]".commReg("g"),lc:"s"},{hit:["《[ {$_ac}]{2,}》".commReg(),"（[ {$_ac}]{2,}）".commReg(),"【[ {$_ac}]{2,}】".commReg()],need:/[ ，]/,lc:"z"},{me:"[{$latin}][A-Za-z]+".commReg("g"),mu1:"^[{$latin}]".commReg("gm"),ms:/——\b[a-zA-Z]+(?: [a-zA-Z]+){1,2}\b/g,mu2:/\b(?:(?:([a-z])\1+|abc?d?e?f?g?|c?defg?|xyz|jqka?|wsad|wasd|qwerty|(What|Why|Fuck|Goal|Go)(?:[，。！？]\2){1,4}|[a-zA-Z](?:[\+\-\.][a-zA-Z])+)\b|[a-zA-Z]{1,4}[国省市县山城江河]|[odlODL]\'[a-z])/gi,ml1:/\b(?:And|Or|By|To|\d+X\d+|Em+|Hm+|Oh+|Ah+|Wa+|Ha+|Nim|Ssi|Xi)\b/g,ml2:/ \b(?:A|About|An|And|As|At|Be|But|By|For|From|In|Into|Is|Nor|Of|Off|On|Onto|Or|Out|Over|Should|So|The|To|Under|Will|With|Yet)\b /g},{hit:/\b(?:Mrs?|Ms|Doc|Dr|Jr|Rev|Hon|Mmes?|Esq|Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sept|Oct|Nov|Dec)\b。(?!$)/g,rp:[/。/,"."]},{hit:[/\b(?:\d[\.。\d]{1,18} ?)(?:(?:portion|second|minute|barrel|sheet|group|batch|bunch|pint|pair|kcal|roll|unit|grad|head|bolt|pile|hour|turn|se[tc]|min|rad|cal|bar|gal|deg|lot|mmg|bag|vin|pkg|vax|vw|cg|bu|ex|re|ml|in|[mμnk]s|[ok]z|f[rt]|[gy]d|p[txc]|[krcmnμ]m|[cszevhm]|[ml][。\.]t|sh[。\.]t|(?:sq|cu)[。\.](?:ft|m)|sq[。\.](?:in|yd))\b|(?:doz|gr|kg|lb|in|g|l)。?|(?:[ml][。\.]t|sh[。\.]t|g[。\.]gr)[。\.])/gi,/。\b(?:Txt|Jpe?g|Bmp|Png|Net|Gif|Ppt|Webp|Avi|Mkv|MP[345])\b/g,/\b(?:[\w-—]+@\b[\w-—]+\b(?:[。\.]\b[\w-—]+\b)+|(?:(?:https?|ftp|file)[:：]\/{2})?\b(?:[-\w]+[。\.])+(?:com|net|org|gov|top|xyz|cn|ru|me|io))\b/gi],at:["：。—",":.-"],lc:"l"}]}),chap=(String.prototype.$English=function(){var r,e=""+this;return e.length<2||e.search(/[a-zA-Z]/)<0?e:(r=["Special","SpecialComb","Unit"].reduce(function(e,n){return e[n]=function(t){return _english[n].split("|").find(function(e){return e.toLowerCase()===(t+"").replace(/ +/g,"").toLowerCase()})},e},{}),e.conv("Letter").maskLetter(config.novelAuthor).replace(/\b(?:[A-Z][a-z]+){3,}\b/g,function(e){return e.replace(/[A-Z]/g," $&").slice(1)}).maskLetter(/&\b[a-zA-Z][a-zA-Z1-8]{1,30}\b[;；]/g).maskLetter(/\b(?:(?:[A-Z][a-z]+){2,}|[a-z]+[A-Z][a-z]*)\b/g).replaceHooks(_english.FixFirst).matchLetterCase(("\\b(?:"+_english.Upper+")\\b").getReg("gi"),"u").replace(("\\b("+_english.Special+")( ?[0-9]{1,4}[a-z]{0,6})?\\b").getReg("gi"),function(e,t,n){return r.Special(t)+(n&&n.toUpperCase()||"")}).replace(("\\b(?:"+_english.SpeciaComb+")\\b").getReg("gi"),r.SpecialComb).replace(("\\b([0-9][0-9。\\.]{0,18} ?)?("+_english.Unit+")\\b").getReg("gi"),function(e,t,n){return~n.search(_english.UnitTest)?t?t+r.Unit(n):e:(t||"")+r.Unit(n)}).replace(_english.Overlap,function(e,t){return t.toLetterCase("f").repeat(~~(e.length/t.length))}).replaceHooks(_english.FixLast))},{});chap.common={sep:"： 　，、．·。—.,:|-",en:"{0,40}",b:["〖【\\[","\\]】〗"],ct:"章",c:["卷部","集篇季册冊辑輯","章折回幕节節话話"],ca:["部分","章[节節]|段落|[单單]元|[段场場阙闕]"],n:["0-9","０-９","零一二三四五六七八九十"],nc:"上中下续终續終",ss:"[（\\(]?[0-9０-９一二三四五六七八九十上中下续终續終]{0,3}[）\\)]?",sw:"[0-9]{1,2}|[零一二三四五六七八九十]{1,3}",nh:"[0-9]{1,5}(?:[-—.][0-9]{1,5})?",n0:"[0-9]{1,5}",n1:"[0-9０-９]{1,5}",n2:"[0-9０-９]{1,5}(?:[-—.][0-9０-９]{1,5})?",n3:"[0０○〇零一二三四五六七八九十百千壹贰叁肆伍陆柒捌玖拾佰仟两廿卅卌貳叄陸兩]{1,7}",n4:"最[初终尾終]|[上下]半|[序初前始后终首末尾後終]之?|[上中下续断开續斷開]",w0:"[简簡自]介|自述|介[绍紹]|[预預]告|相[关關]",w1:"[作译譯编編著]者",w2:"(?:完[结結]|[完终終])",w3:"[☆★○●◎◇◆□■△▲※＃#]"},chap.model={f:"[{$space}]*".commFmt(),s:"[{$sep}]{1,4}",sn:"[{$sep}]{0,4}",sz:"[{$sep}之]{1,4}",e:".{$en}[^。：;；\\n]",es:".{$en}[^，。：;；、…？！’”』」\\n]",ez:".{1,40}",t0:"正文|文[案按]|[题題][注记註記跋]|[题題开開][卷篇头场頭場][诗词语詩詞語]|{$w1}(?:[案按]|寄[语語]|[前感]言|[后後的][话話])|[卷篇][首后後][语語]?|完[本结結]感言|[開开][場场]白|[脚标批附腳標][注註]|[注註][释解釋]|[导導][读讀语語]|[绪緒弁][言论論]|寄[语語]|[提总總梗]要|梗概|素材|目[录錄]|[大细总提細總][纲綱]|{$w0}|(?:小[说說]|作[品者]|主要人物|人物|内容|本书|[全本下][{$c.0}{$c.1}])(?:{$w0})",t1:["序篇章|首部曲|{$w1}序|[续續外][{$n}]?[{$c.2}]|(?:序章?|前[言记記]|尾[声聲]|[后後][记記]|楔子|引[子言文]|序[言论論文目曲传傳跋]|附[录錄]|[绪緒弁][言论論]|[后後][话話序语語]|附[记記语語]|尾[记記跋]|跋[尾文语語]|[首小节自次总代節總简原]序|大?[结結]局){$ss}","(?:同人[续續]?|[前后外续正後續间間转轉][传篇傳章]|完[结結]篇|特[别別]篇|[前后外里裏]番|[番篇]外[篇卷章语語]?){$ss}"],t2:"((?:第?{$n2}|第?{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t3:"([\\(（〔](?:{$n2}|{$n3}|[{$nc}])[\\)）〕])",t4:"([折卷册冊段节節])({$n1}|{$n3})",t5:"(?:\\b(?:chapter|section|chap|ch|part)\\b|{$w3})[ \\.]*({$n1})",t6:"({$n2}|{$n3})",t20:"((?:{$n2}|{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t21:"((?:第{$n2}|第{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t80:"[\\[\\(（〖【〈［〔]({$n2}|{$n3})[\\]\\)）〗】〉］〕]",t81:"[\\[\\(（〖【〈［〔]((?:第?{$n2}|第?{$n3}|{$n4})[{$c}])[\\]\\)）〗】〉］〕]",t90:"(?:第?{$n2}|第?{$n3}|{$n4})",t91:"(?:第{$n2}|第{$n3}|{$n4})",ts:"[第\\(（][{$n.0}{$n.1}\\- 　]{3,12}[{$c}\\）)]"},chap.list={t0:{tpl:"^(?:{$t0}){$sn}$",level:3},t1:{tpl:"^({$t1})({$sn}|{$sz}{$e})$",join:"|"},t2:{tpl:"^{$t2}({$sn})({$e}|$)$"},t3:{tpl:"^{$t3}({$e}|$)$",level:4},t4:{tpl:"^{$t4}({$s}|{$s}{$e}|$)$",level:2},t5:{tpl:"^{$t5}{$sn}({$e}|$)$",type:"relaxe",level:3},t6:{tpl:"^{$t6}({$s}|{$s}{$e}|$)$",type:"relaxe",level:2}},String.prototype.chapFlag=function(e,t){t=this.fmt(chap.model,t).fmt(chap.common);return""!=(e=""===e?"":e||"gm")&&e.indexOf("i")<0&&-1<t.indexOf("chapter")&&(e+="i"),{str:t,flag:e,t:e.replace("g","")}},String.prototype.chapReg=function(e,t){e=this.chapFlag(e,t);return e.str.getReg(e.flag)},String.prototype.chapSafety=((e,n,r)=>function(){return e.reduce(function(e,t){return e.replace(t,function(e){return"\n"+e.trim().replace(n,r)+"\n"})},this)})(["\\n(?:(?:{$sw}){$s}.*\\n(?:[^第\\n].*\\n){0,2}){2,10}".chapReg("g"),"\\n(?:[\\(（](?:{$sw})[\\)）].*\\n(?:[^第\\n].*\\n){0,2}){2,10}".chapReg("g"),/\n(?:第.+[。；…]\n){3,20}/g],"^(?:(?:{$sw}){$s}|[\\(（第]).+$".chapReg("gm"),"{$sf}$&{$sf}".commFmt()),chap.skips={t0:[/[。;；—]$/,/^[\-—]{1,2}/,/^\d{1,6}(?:[\.,，。]\d{1,6})+/],t1:[/^(?:[上下]回|断章取义|同人不|序[长词战兴常稿歌秩次传述長詞戰興傳]|[开尾][部集阙季册闕冊章折回话节幕節話]|[前后上下中]段)/],t2:[/^(?:上节[目课]|下节课|[上下]篇作[业文]|[零○〇])/,/^[一二三四五六七八九十]{1,2}[爷奶爹娘爸妈舅叔姨婶嫂哥姐弟妹儿女孙侄子]/,/^(?:一(?:[直切生世味边旁幕起到]|回[复合首头到])|二话[没不沒]|三[生世八]|四[周边处海]|五[谷更体]|[百千][折转]|千篇一律)/,/^第?[零一二三四五六七八九十百两]{1,3}(?:季度|卷[书经]|篇[篇经文]|[部集](?:戏|戲|电[影视視]|的|小说)|部好莱坞|回合|节课|段时间|场比赛)/,"^第?[{$n}][{$c}](?:《|……|[？！]{1,3}|[{$n}]|[，、]?第|[呢吗啊吧哈])".chapReg("")],t3:["^(?:{$n1}|{$n2})[年月日]".chapReg(""),/^[一二三十](?:[，、][一二三八九]){1,}/,/^(?:一二三|三二一)[，。！…]/,/^([一二三四五六七八九十百两兩])\1/,/^(?:壹[壹拾伍]|叁[叁伍捌]|伍[伍陆]|陆[陆]|拾[金取]|十[万分]|百[分千]|万[万千])/,/^[一二三四五六七八九十]{1,3}(?:[千万]两|[，、].*[…]$)/],t6:[/^\b\d{1,4}(?:[\.。\-\—\/、,，:：]\d{1,12}){1,}/,/^[\d０-９一二三四五六七八九十]{1,4}[年月][\d０-９一二三四五六七八九十]{1,3}[月日]/,/^\b[\d\.\-\—\至]{1,12}[%％‰℃°万亿wmbkWMBK]/,/^[\d０-９一二三四五六七八九十百千万]{1,12}[元块次多]?[！？。…]{1,3}$/,/^[\d０-９]{1,4}(?:[、，][\d０-９]{1,4}){1,}/]},Object.assign(String.prototype,{$Chapter:function(i,c,o){["nofix","fix","center","left","right"].includes(i||"")||(i="fix"),o=o||"","safe"==(c=c||"\n\n")&&(c=o=common.sf,chap.model.t2=chap.model.t21);var p="^(?:{$n4})".chapReg(""),u="^{$w2}$".chapReg(),r="{$ss}$".chapReg("");return(""+this).conv("Number").cleanSpace("{$ts}".chapReg("g")).chapSafety().__ChapterPrep("t0",function(e){return e.stringAlign(c,o,i)}).__ChapterPrep("t1",function(e,t,n){return n&&~n.search(/^[\!\?！？。…]{1,3}$/)||e.__ChapterSkip("t0")||e.__ChapterSkip("t1")?e:(n?n=n.__ChapterHandle(~n.search(/^之/),"t1"):t=t.replace(r,function(e){return"（"+e.replace(/[（\(\)）]/g,"")+"）"}).replace(/（）/,""),(t+n).stringAlign(c,o,i))}).replace(/序：之[章卷]/g,function(e){return e.replace(/：/,"")}).__ChapterPrep("t2",function(e,t,n,r){var a;return r&&~r.search(u)?"【"+t+"·"+r+"】":!(n=(a="第"===t.charAt(0))&&r&&~t.search(/\d/)?"：":n)&&!a||~r.search(/^[！？。…]{1,3}$/)||!n&&r&&~r.search(/[，。]/g)||e.__ChapterSkip("t0")||e.__ChapterSkip("t2")?e:((t=~t.search(p)?t:"第"+t.replace(/^第+/,"")).__ChapterZero()+r.__ChapterHandle()).stringAlign(c,o,i)}).__ChapterPrep("t3",function(e,t,n){return e.__ChapterSkip("t0")||~n.indexOf(t)?e:(t.__ChapterZero()+n.__ChapterHandle("no")).stringAlign(c,o,i)}).$ChapterFix(c,o,"fix"===i).__ChapterSafeRestore(~c.indexOf(common.sf))},$ChapterFix:function(a,i,e){var r;return e?(r=chap.common.ct,this.__ChapterPrep("t4",function(e,t,n,r){return a+"第"+n+t+r.__ChapterHandle()+i}).__ChapterPrep("t5",function(e,t,n){return a+"第"+t.__ChapterZero()+r+n.__ChapterHandle(!1,"t5")+i}).__ChapterPrep("t6",function(e,t,n){return~(n=n.trims()).search(/^[！？。…—]{1,3}$/)||~n.search(~t.search(/^\d+/)?/[！？。]$/:/[！？。…’”』」]$/)||e.__ChapterSkip("t0")||e.__ChapterSkip("t2")||e.cleanSpace().__ChapterSkip("t6")?e:a+"第"+t.__ChapterZero()+r+n.__ChapterHandle()+i})):this},__ChapterSafeRestore:function(e){return e?this:this.replace("{$sf}".commReg("g"),"")},__ChapterSkip:function(e){return this.someTest(chap.skips[e||"t0"])},__ChapterZero:function(){return(""+this).replace(/\b[1-9]\b/g,"0$&")}}),(i=>{Object.assign(String.prototype,{__ChapterHandle:function(e,t){var n=(""+this).replace(/  +/g," ").replace(i.b,function(e){return e.slice(1,-1)}).replace(i.sep,"");return n.length<1?"":("t1"==t?n=n.replace(i.t1,"（$&）"):"t5"==t&&(n=n.replace(i.t5,"")),(e?"":config.Divide)+n.replace(/^[上中下一二三四五续补再终完]{1,3}$/,"（$&）").replace(i.s1,"$1（$2）").replace(i.s2,"（$1）").replace(/[ ·][IVXC]{1,6}$/i,function(e){return"（"+e.slice(1).toUpperCase()+"）"}).replace(/（(\d)）$/,"（0$1）").replace(i.s3,"，").replace(/【?(注\b\d{1,2}\b)】?/g,"【$1】"))},__ChapterPrep:function(e,t){var n=this,r=chap.list[e],e=chap.model[e],a="",r=("join"in r&&(a=r.join,e=e.join(a)),r.tpl.chapFlag("gm",a)),n=n.replace("^[{$b.0}](?:{$0})[{$b.1}]?(?:{$sn}{$e})?$".fmt(e).chapReg(),function(e){return~e.search(i.p1)||!~e.slice(1).search(i.p2)?e:e.trims().replace(i.p0," ").replace(/^ +/,"")});return r.str=r.str.replace(/０\-９|[０-９]/g,""),n.replace(r.str.getReg(r.flag),t)}})})({b:"^[{$b.0}].+[{$b.1}]$".chapReg(""),sep:"^[{$sep}]+".chapReg(""),t1:"^(?:[{$nc}]|[0-9]{1,2})$".chapReg(""),t5:"{$w3}+$".chapReg(""),s1:"([^0-9a-zA-Z\\.])[ ·—-]([{$nc}]|[{$n}]{1,2})$".chapReg(""),s2:"[ ·]([{$nc}]|[0-9]{1,2})$".chapReg(""),s3:" (?=[{$han}]+)".commReg("g"),p0:"[{$b}]".chapReg("g"),p1:"[，。]|{$w2}[{$b.1}]$".chapReg(""),p2:"^(?:第?{$n2}|第?{$n3}|{$n4})[{$c}]?(?:{$s}{$e})?[{$b.1}]$".chapReg("")});